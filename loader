local FumeUI = {}

local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local function makeDraggable(frame)
	local drag = false
	local dragInput, dragStart, startPos

	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			drag = true
			dragStart = input.Position
			startPos = frame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					drag = false
				end
			end)
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement and drag then
			local delta = input.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

function FumeUI:CreateWindow(title)
	local gui = Instance.new("ScreenGui", CoreGui)
	gui.Name = "FumeUI"
	gui.ResetOnSpawn = false
	gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	local main = Instance.new("Frame", gui)
	main.Size = UDim2.new(0, 450, 0, 320)
	main.Position = UDim2.new(0.5, -225, 0.5, -160)
	main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	main.BorderSizePixel = 0
	main.Active = true
	main.AnchorPoint = Vector2.new(0.5, 0.5)

	local corner = Instance.new("UICorner", main)
	corner.CornerRadius = UDim.new(0, 10)

	local top = Instance.new("TextLabel", main)
	top.Size = UDim2.new(1, 0, 0, 40)
	top.BackgroundTransparency = 1
	top.Text = title or "Fume UI"
	top.Font = Enum.Font.GothamMedium
	top.TextSize = 18
	top.TextColor3 = Color3.new(1, 1, 1)

	local content = Instance.new("Frame", main)
	content.Position = UDim2.new(0, 10, 0, 50)
	content.Size = UDim2.new(1, -20, 1, -60)
	content.BackgroundTransparency = 1

	local layout = Instance.new("UIListLayout", content)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 8)

	makeDraggable(main)

	local window = {}

	function window:Button(text, callback)
		local button = Instance.new("TextButton", content)
		button.Size = UDim2.new(1, 0, 0, 32)
		button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		button.Text = text
		button.TextColor3 = Color3.new(1, 1, 1)
		button.Font = Enum.Font.Gotham
		button.TextSize = 14
		button.BorderSizePixel = 0

		local btnCorner = Instance.new("UICorner", button)
		btnCorner.CornerRadius = UDim.new(0, 6)

		button.MouseButton1Click:Connect(function()
			pcall(callback)
		end)
	end

	return window
end

return FumeUI
